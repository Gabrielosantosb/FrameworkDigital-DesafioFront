<nz-page-header class="mobile-header" nzTitle="Gerenciar Leads">
</nz-page-header>

<form nz-form nzLayout="vertical" [formGroup]="filterLeadForm" (ngSubmit)="loadLeads()">
  <nz-divider
    nzText="Filtros"
    nzOrientation="left"
    ></nz-divider>
  <nz-row nzGutter="12">
    <nz-col nzSm="8" nzXs="24">
      <nz-form-label
      >Primeiro nome
      </nz-form-label
      >
      <nz-form-item>
        <nz-form-control>
          <input
            formControlName="contactFirstName"
            placeholder="Primeiro Nome"
            nz-input
            type="text"
          >
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col nzSm="8" nzXs="24">
      <nz-form-label
      >Sobrenome
      </nz-form-label
      >
      <nz-form-item>
        <nz-form-control>
          <input
            formControlName="contactLastName"
            placeholder="Sobrenome"
            nz-input
            type="text"
          >
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col nzSm="8" nzXs="24">
      <nz-form-label
      >Email
      </nz-form-label
      >
      <nz-form-item>
        <nz-form-control>
          <input
            formControlName="contactEmail"
            placeholder="E-mail"
            nz-input
            type="text"
          >
        </nz-form-control>
      </nz-form-item>
    </nz-col>
  </nz-row>

  <nz-row nzGutter="12">
    <nz-col nzSm="8" nzXs="24">
      <nz-form-label
      >Subúrbio
      </nz-form-label
      >
      <nz-form-item>
        <nz-form-control>
          <input
            formControlName="suburb"
            placeholder="Subúrbio"
            nz-input
            type="text"
          >
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col nzSm="8" nzXs="24">
      <nz-form-label
      >Categoria
      </nz-form-label
      >
      <nz-form-item>
        <nz-form-control>
          <input
            formControlName="category"
            placeholder="Categoria"
            nz-input
            type="text"
          >
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col nzSm="8" nzXs="24">
      <nz-form-label
      >Preço mínimo
      </nz-form-label
      >
      <nz-form-item>
        <nz-form-control>
          <input
            formControlName="minPrice"
            placeholder="Preço mínimo"
            nz-input
            type="number"
          >
        </nz-form-control>
      </nz-form-item>
    </nz-col>
  </nz-row>

  <nz-row nzGutter="12">
    <nz-col nzSm="8" nzXs="24">
      <nz-form-label
      >Preço máximo
      </nz-form-label
      >
      <nz-form-item>
        <nz-form-control>
          <input
            formControlName="maxPrice"
            placeholder="Preço maximo"
            nz-input
            type="number"
          >
        </nz-form-control>
      </nz-form-item>
    </nz-col>
  </nz-row>

  <nz-row>
    <nz-col class="button-group" nzSpan="24">
      <button nz-button
              nzSize="large"
              type="button"
              style="margin-right: 5px"
              [nzLoading]='isLoading'
              (click)="clearFilters()">
        <i nz-icon nzType="filter" nzTheme="outline"></i>Limpar Filtros
      </button>
      <button nz-button
              nzType="primary"
              nzSize="large"
              type="submit"
              [nzLoading]="isLoading">
        <i nz-icon nzType="search" nzTheme="outline"></i> Buscar
      </button>

    </nz-col>
  </nz-row>
</form>

<nz-spin [nzSpinning]="isLoading">
  <nz-divider
    nzText="Encontrados: {{ totalItems }} "
    nzOrientation="left"
    *ngIf="!!totalItems"></nz-divider>

  <div nz-row class="table-responsive">
    <nz-table
      nzShowSizeChanger
      [nzData]="leadsData"
      nzSize="default"
      [nzFrontPagination]="false"
      [nzShowPagination]="showPagination"
      [nzTotal]="totalItems"
      [nzPageIndex]="pagination.page"
      [nzPageSize]="pagination.pageSize"
      (nzPageIndexChange)="onPageIndexChange($event)"
    >

    </nz-table>


  </div>
</nz-spin>

